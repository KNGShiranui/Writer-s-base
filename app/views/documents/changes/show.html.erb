<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Markdiff</title>
  </head>
  <body>
    <div class="row justify-content-md-center">
      <div class="col-8 p-4">
        <div class="content">
          <div class="d-flex justify-content-between mb-3">
            <%= link_to "\"#{@document.name}\"へ戻る", document_path(@document) %>
          </div>
          <h1>差分を表示する</h1>
          <%# binding.pry %>
          <% @version.changeset.keys.select { |key| %w[name content].include?(key) }.each do |key| %>
            <%# 参考：配列オブジェクト.select { |変数| ブロック処理 } %>
            <%# %w[name content]は%i[name content]だとダメ！ %>
            <%# 参考：ary = ["a", "b", "c"]においてary.include?("a") は順にtrue, false, falseを返す%>
            <%# 万葉課題のタスク優先度実装のところで似た表記を使用したので参考に %>
            <div class="mb-4">
              <h3>
                <%= Document.human_attribute_name(key) %>
                <%#上記のコードはカラム名を示している  %>
              </h3>
              <div>
                <%= raw Markdiff::Differ.new.render(*@version.changeset[key]) %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </body>
</html>